<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Estudante</title>
    <!-- Link para o CSS do Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>

<div class="container mt-5">
    <h2 class="text-center mb-4">Cadastro de Estudante</h2>
    <form>
        <div class="mb-3">
            <label for="nome" class="form-label">Nome</label>
            <input type="text" class="form-control" id="nome" placeholder="Digite o nome completo" required>
        </div>
        <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input type="email" class="form-control" id="email" placeholder="Digite o email" required>
        </div>
        <div class="mb-3">
            <label for="cpf" class="form-label">CPF</label>
            <input type="text" class="form-control" id="cpf" placeholder="Digite o CPF" required>
        </div>
        <div class="mb-3">
            <label for="data_nascimento" class="form-label">Data de Nascimento</label>
            <input type="date" class="form-control" id="data_nascimento" required>
        </div>
        <button type="submit" class="btn btn-primary w-100">Cadastrar</button>
    </form>
</div>

<!-- Script do Bootstrap 5 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script>
document.addEventListener("DOMContentLoaded", function () {
const form = document.querySelector("form");

form.addEventListener("submit", function (event) {
    event.preventDefault(); // Evita o comportamento padrão de envio do formulário

    // Captura os valores dos campos
    const nome = document.getElementById("nome").value;
    const email = document.getElementById("email").value;
    const cpf = document.getElementById("cpf").value;
    const data_nascimento = document.getElementById("data_nascimento").value;

    // Cria o objeto com os dados do formulário
    const dadosEstudante = {
        nome: nome,
        email: email,
        cpf: cpf,
        data_nascimento: data_nascimento
    };
    const username = "teste";
    const password = "cleber1234";
    const basicAuth = btoa(`${username}:${password}`);
    // Envia os dados para o backend
    fetch("http://localhost:8000/estudantes/", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
            "Authorization": `Basic ${basicAuth}`
        },
        body: JSON.stringify(dadosEstudante),
    })
    .then(response => {
        if (response.ok) {
            alert("Estudante cadastrado com sucesso!");
            form.reset(); // Limpa o formulário após o envio
        } else {
            alert("Erro ao cadastrar estudante.");
        }
        return response.json();
    })
    .catch(error => {
        console.error("Erro ao enviar dados:", error);
        alert("Erro na conexão com o servidor.");
    });
});
});

</script>
</body>
</html>

